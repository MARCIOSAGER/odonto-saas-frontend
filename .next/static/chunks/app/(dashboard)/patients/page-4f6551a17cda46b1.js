(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[467],{82941:function(e,t,n){Promise.resolve().then(n.bind(n,95121))},95121:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return _}});var r=n(57437),s=n(62869),a=n(95186),i=n(66070),o=n(73578),c=n(18508),l=n(94508),d=n(2265);let u=c.fC,m=c.xz;function x(e){let{className:t,children:n}=e;return(0,r.jsxs)(c.h_,{children:[(0,r.jsx)(c.aV,{className:"fixed inset-0 bg-black/40"}),(0,r.jsx)(c.VY,{className:(0,l.cn)("fixed left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2","w-[95vw] max-w-lg rounded-lg bg-white shadow-sm",t),children:n})]})}function h(e){let{title:t,description:n}=e;return(0,r.jsxs)("div",{className:"border-b border-gray-200 p-4",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:t}),n&&(0,r.jsx)("p",{className:"text-sm text-gray-600",children:n})]})}c.x8;var f=n(29827),p=n(11713),g=n(21770),b=n(29116),j=n(37367),v=n(29501),y=n(45701),N=n(11384);function w(e){let{onSubmit:t,onCancel:n,loading:i}=e,{register:o,handleSubmit:c,formState:{errors:l}}=(0,v.cI)({resolver:(0,y.F)(N.Ql),defaultValues:{status:"Ativo"}});return(0,r.jsxs)("form",{className:"space-y-3",onSubmit:c(t),"aria-label":"Formul\xe1rio de paciente",children:[(0,r.jsxs)("div",{className:"grid gap-3 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Nome completo *"}),(0,r.jsx)(a.I,{...o("nome"),"aria-invalid":!!l.nome}),l.nome&&(0,r.jsx)("p",{className:"mt-1 text-xs text-error",children:l.nome.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Telefone *"}),(0,r.jsx)(a.I,{...o("telefone"),"aria-invalid":!!l.telefone}),l.telefone&&(0,r.jsx)("p",{className:"mt-1 text-xs text-error",children:l.telefone.message})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"CPF"}),(0,r.jsx)(a.I,{...o("cpf")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Email"}),(0,r.jsx)(a.I,{type:"email",...o("email")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Data nascimento"}),(0,r.jsx)(a.I,{type:"date",...o("dataNascimento")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Status"}),(0,r.jsxs)("select",{className:"h-10 w-full rounded-lg border border-gray-300 px-3 text-sm",...o("status"),children:[(0,r.jsx)("option",{children:"Ativo"}),(0,r.jsx)("option",{children:"Inativo"})]})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Endere\xe7o"}),(0,r.jsx)("textarea",{className:"h-24 w-full rounded-lg border border-gray-300 p-3 text-sm",...o("endereco")})]})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,r.jsx)(s.z,{type:"button",variant:"ghost",onClick:n,children:"Cancelar"}),(0,r.jsx)(s.z,{type:"submit",disabled:i,"aria-busy":i,children:"Salvar"})]})]})}var T=n(89534);function _(){let e=(0,f.NL)(),{success:t,error:n}=(0,T.pm)(),[c,l]=(0,d.useState)(""),[v,y]=(0,d.useState)("Todos"),[N,_]=(0,d.useState)(!1),{data:k=[]}=(0,p.a)({queryKey:["patients",c,v],queryFn:async()=>{try{return(await b.h.get("/api/patients",{params:{q:c,status:"Todos"===v?void 0:v}})).data}catch(e){return j.jf}}}),Z=(0,g.D)({mutationFn:async e=>{try{return(await b.h.post("/api/patients",e)).data}catch(t){return{...e,id:Math.random().toString(36).slice(2)}}},onSuccess:()=>{e.invalidateQueries({queryKey:["patients"]}),t("Paciente criado com sucesso"),_(!1)},onError:()=>n("Erro ao criar paciente")});return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold",children:"Pacientes"}),(0,r.jsxs)(u,{open:N,onOpenChange:_,children:[(0,r.jsx)(m,{asChild:!0,children:(0,r.jsx)(s.z,{variant:"success",children:"+ Novo Paciente"})}),(0,r.jsxs)(x,{children:[(0,r.jsx)(h,{title:"+ Novo Paciente"}),(0,r.jsx)(i.aY,{children:(0,r.jsx)(w,{onSubmit:e=>Z.mutate({...e}),onCancel:()=>_(!1),loading:Z.isPending})})]})]})]}),(0,r.jsx)(i.Zb,{children:(0,r.jsxs)(i.aY,{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-3",children:[(0,r.jsx)(a.I,{placeholder:"Buscar (nome, telefone, CPF)",value:c,onChange:e=>l(e.target.value),"aria-label":"Buscar pacientes"}),(0,r.jsxs)("select",{className:"h-10 rounded-lg border border-gray-300 px-3 text-sm",value:v,onChange:e=>y(e.target.value),"aria-label":"Filtro de status",children:[(0,r.jsx)("option",{children:"Todos"}),(0,r.jsx)("option",{children:"Ativo"}),(0,r.jsx)("option",{children:"Inativo"})]}),(0,r.jsx)(s.z,{variant:"ghost",onClick:()=>{l(""),y("Todos")},children:"Limpar filtros"})]}),(0,r.jsxs)(o.iA,{children:[(0,r.jsx)(o.Et,{children:(0,r.jsxs)(o.TR,{children:[(0,r.jsx)(o.TH,{children:"Nome"}),(0,r.jsx)(o.TH,{children:"Telefone"}),(0,r.jsx)(o.TH,{children:"CPF"}),(0,r.jsx)(o.TH,{children:"Email"}),(0,r.jsx)(o.TH,{children:"Status"}),(0,r.jsx)(o.TH,{children:"A\xe7\xf5es"})]})}),(0,r.jsx)(o.XP,{children:k.slice(0,10).map(e=>(0,r.jsxs)(o.TR,{children:[(0,r.jsx)(o.TD,{children:e.nome}),(0,r.jsx)(o.TD,{children:e.telefone}),(0,r.jsx)(o.TD,{children:e.cpf}),(0,r.jsx)(o.TD,{children:e.email}),(0,r.jsx)(o.TD,{children:e.status}),(0,r.jsxs)(o.TD,{className:"space-x-2",children:[(0,r.jsx)(s.z,{variant:"ghost",size:"sm",children:"Ver"}),(0,r.jsx)(s.z,{variant:"secondary",size:"sm",children:"Editar"}),(0,r.jsx)(s.z,{variant:"warning",size:"sm",children:"Inativar"})]})]},e.id))})]})]})})]})}},62869:function(e,t,n){"use strict";n.d(t,{z:function(){return i}});var r=n(57437),s=n(37053),a=n(94508);function i(e){let{asChild:t,className:n,variant:i="primary",size:o="md",...c}=e,l=t?s.g7:"button";return(0,r.jsx)(l,{className:(0,a.cn)("inline-flex items-center justify-center rounded-lg shadow-sm transition-colors disabled:opacity-60 disabled:cursor-not-allowed","sm"===o?"h-9 px-3 text-sm":"lg"===o?"h-12 px-6 text-base":"h-10 px-4 text-sm","primary"===i?"bg-primary text-white hover:bg-[#005CB8]":"secondary"===i?"bg-secondary text-white hover:bg-[#0094CB]":"success"===i?"bg-success text-white hover:bg-emerald-600":"warning"===i?"bg-warning text-white hover:bg-amber-600":"error"===i?"bg-error text-white hover:bg-red-600":"bg-transparent text-primary hover:bg-gray-100",n),...c})}n(2265)},66070:function(e,t,n){"use strict";n.d(t,{Ol:function(){return i},Zb:function(){return a},aY:function(){return o}});var r=n(57437);n(2265);var s=n(94508);function a(e){let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,s.cn)("rounded-lg border border-gray-200 bg-white shadow-sm",t),...n})}function i(e){let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,s.cn)("p-4 border-b border-gray-200",t),...n})}function o(e){let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,s.cn)("p-4",t),...n})}},95186:function(e,t,n){"use strict";n.d(t,{I:function(){return a}});var r=n(57437);n(2265);var s=n(94508);function a(e){let{className:t,...n}=e;return(0,r.jsx)("input",{className:(0,s.cn)("h-10 w-full rounded-lg border border-gray-300 px-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary","disabled:bg-gray-100 disabled:cursor-not-allowed",t),...n})}},73578:function(e,t,n){"use strict";n.d(t,{Et:function(){return i},TD:function(){return d},TH:function(){return l},TR:function(){return c},XP:function(){return o},iA:function(){return a}});var r=n(57437);n(2265);var s=n(94508);function a(e){let{className:t,...n}=e;return(0,r.jsx)("table",{className:(0,s.cn)("w-full text-sm",t),...n})}function i(e){return(0,r.jsx)("thead",{...e})}function o(e){return(0,r.jsx)("tbody",{...e})}function c(e){return(0,r.jsx)("tr",{className:"border-b last:border-0",...e})}function l(e){let{className:t,...n}=e;return(0,r.jsx)("th",{className:(0,s.cn)("text-left p-3 text-gray-600",t),...n})}function d(e){let{className:t,...n}=e;return(0,r.jsx)("td",{className:(0,s.cn)("p-3",t),...n})}},89534:function(e,t,n){"use strict";n.d(t,{pm:function(){return o},x7:function(){return c}});var r=n(57437),s=n(59625),a=n(2265);let i=(0,s.Ue)(e=>({toasts:[],add:t=>e(e=>({toasts:[...e.toasts,{id:Math.random().toString(36).slice(2),...t}]})),remove:t=>e(e=>({toasts:e.toasts.filter(e=>e.id!==t)}))}));function o(){let e=i(e=>e.add);return{success:t=>e({message:t,type:"success"}),error:t=>e({message:t,type:"error"}),warning:t=>e({message:t,type:"warning"}),info:t=>e({message:t,type:"info"})}}function c(e){let{position:t="top-right"}=e,n=i(e=>e.toasts),s=i(e=>e.remove);return(0,a.useEffect)(()=>{if(0===n.length)return;let e=n.map(e=>setTimeout(()=>s(e.id),3500));return()=>e.forEach(clearTimeout)},[n,s]),(0,r.jsx)("div",{className:"fixed z-50 ".concat("top-right"===t?"top-4 right-4":"top-left"===t?"top-4 left-4":"bottom-right"===t?"bottom-4 right-4":"bottom-4 left-4"," flex flex-col gap-2"),children:n.map(e=>(0,r.jsx)("div",{role:"status","aria-live":"polite",className:"min-w-[260px] rounded-lg shadow-sm px-4 py-3 text-white ".concat("success"===e.type?"bg-success":"error"===e.type?"bg-error":"warning"===e.type?"bg-warning":"bg-secondary"),children:e.message},e.id))})}},29116:function(e,t,n){"use strict";n.d(t,{h:function(){return i}});var r=n(83464),s=n(42097),a=n(80605);let i=r.Z.create({baseURL:"http://localhost:3001"});i.interceptors.request.use(async e=>{let t=s.s.getState().token;if(!t){let e=await (0,a.getSession)();t=null==e?void 0:e.accessToken}return t&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(t)),e}),i.interceptors.response.use(e=>e,e=>{var t;return console.error("API Error:",(null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.data)||e.message),s.s.getState().setMockMode(!0),Promise.reject(e)})},37367:function(e,t,n){"use strict";n.d(t,{Q7:function(){return c},ec:function(){return i},hv:function(){return o},jf:function(){return a}});var r=n(35778),s=n(59121);let a=Array.from({length:10},(e,t)=>({id:"".concat(t+1),nome:"Paciente ".concat(t+1),telefone:"11 99999-9999",cpf:"000.000.00".concat(t,"-00"),email:"paciente".concat(t+1,"@exemplo.com"),status:t%2==0?"Ativo":"Inativo"})),i=Array.from({length:3},(e,t)=>({id:"".concat(t+1),nome:"Dentista ".concat(t+1),cro:"CRO-".concat(1e3+t),especialidade:["Ortodontia","Endodontia","Cl\xednico Geral"][t%3],status:"Ativo"})),o=Array.from({length:6},(e,t)=>({id:"".concat(t+1),nome:"Servi\xe7o ".concat(t+1),descricao:"Descri\xe7\xe3o do servi\xe7o",preco:150+50*t,duracao:30+10*t})),c=Array.from({length:15},(e,t)=>({id:"".concat(t+1),data:(0,r.c)((0,s.E)(new Date,t%7),{representation:"date"}),hora:"".concat(9+t%8,":00"),paciente:a[t%a.length].nome,dentista:i[t%i.length].nome,servico:o[t%o.length].nome,status:["Confirmado","Pendente","Cancelado"][t%3]}))},42097:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});let r=(0,n(59625).Ue)(e=>({token:void 0,mockMode:!1,setToken:t=>e({token:t}),setMockMode:t=>e({mockMode:t})}))},94508:function(e,t,n){"use strict";function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}n.d(t,{cn:function(){return r}})},11384:function(e,t,n){"use strict";n.d(t,{Ql:function(){return a},dm:function(){return s}});var r=n(67119);let s=r.Ry({email:r.Z_().email({message:"Email inv\xe1lido"}),password:r.Z_().min(6,{message:"Senha deve ter no m\xednimo 6 caracteres"})}),a=r.Ry({nome:r.Z_().min(1,"Nome \xe9 obrigat\xf3rio"),telefone:r.Z_().min(8,"Telefone \xe9 obrigat\xf3rio"),cpf:r.Z_().optional(),email:r.Z_().email().optional(),dataNascimento:r.Z_().optional(),endereco:r.Z_().optional(),status:r.Km(["Ativo","Inativo"])});r.Ry({pacienteId:r.Z_().min(1,"Paciente \xe9 obrigat\xf3rio"),dentistaId:r.Z_().min(1,"Dentista \xe9 obrigat\xf3rio"),servicoId:r.Z_().min(1,"Servi\xe7o \xe9 obrigat\xf3rio"),data:r.Z_().min(1,"Data \xe9 obrigat\xf3ria"),hora:r.Z_().min(1,"Hora \xe9 obrigat\xf3ria"),observacoes:r.Z_().optional()}),r.Ry({nome:r.Z_().min(1),cnpj:r.Z_().min(14),telefone:r.Z_().min(8),plano:r.Z_().optional(),status:r.Km(["Ativa","Inativa"])})}},function(e){e.O(0,[605,923,651,501,572,419,971,117,744],function(){return e(e.s=82941)}),_N_E=e.O()}]);